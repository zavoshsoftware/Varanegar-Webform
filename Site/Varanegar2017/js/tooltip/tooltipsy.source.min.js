(function(n){n.tooltipsy=function(t,i){this.options=i;this.$el=n(t);this.title=this.$el.attr("title")||"";this.$el.attr("title","");this.random=parseInt(Math.random()*1e4);this.ready=!1;this.shown=!1;this.width=0;this.height=0;this.delaytimer=null;this.$el.data("tooltipsy",this);this.init()};n.tooltipsy.prototype={init:function(){var t=this,i,u=t.$el,r=u[0];t.settings=i=n.extend({},t.defaults,t.options);i.delay=+i.delay;typeof i.content=="function"&&t.readify();i.showEvent===i.hideEvent&&i.showEvent==="click"?u.toggle(function(n){i.showEvent==="click"&&r.tagName=="A"&&n.preventDefault();i.delay>0?t.delaytimer=window.setTimeout(function(){t.show(n)},i.delay):t.show(n)},function(n){i.showEvent==="click"&&r.tagName=="A"&&n.preventDefault();window.clearTimeout(t.delaytimer);t.delaytimer=null;t.hide(n)}):u.bind(i.showEvent,function(n){i.showEvent==="click"&&r.tagName=="A"&&n.preventDefault();t.delaytimer=window.setTimeout(function(){t.show(n)},i.delay||0)}).bind(i.hideEvent,function(n){i.showEvent==="click"&&r.tagName=="A"&&n.preventDefault();window.clearTimeout(t.delaytimer);t.delaytimer=null;t.hide(n)})},show:function(t){var h,u;this.ready===!1&&this.readify();var i=this,r=i.settings,e=i.$tipsy,o=i.$el,s=o[0],f=i.offset(s);i.shown===!1&&(function(n){var t=0;for(var i in n)n.hasOwnProperty(i)&&t++;return t}(r.css)>0&&i.$tip.css(r.css),i.width=e.outerWidth(),i.height=e.outerHeight());r.alignTo==="cursor"&&t?(u=[t.clientX+r.offset[0],t.clientY+r.offset[1]],h=u[0]+i.width>n(window).width()?{top:u[1]+"px",right:u[0]+"px",left:"auto"}:{top:u[1]+"px",left:u[0]+"px",right:"auto"}):u=[function(){return r.offset[0]<0?f.left-Math.abs(r.offset[0])-i.width:r.offset[0]===0?f.left-(i.width-o.outerWidth())/2:f.left+o.outerWidth()+r.offset[0]}(),function(){return r.offset[1]<0?f.top-Math.abs(r.offset[1])-i.height:r.offset[1]===0?f.top-(i.height-i.$el.outerHeight())/2:f.top+i.$el.outerHeight()+r.offset[1]}()];e.css({top:u[1]+"px",left:u[0]+"px"});i.settings.show(t,e.stop(!0,!0))},hide:function(n){var t=this;if(t.ready!==!1){if(n&&n.relatedTarget===t.$tip[0]){t.$tip.bind("mouseleave",function(n){n.relatedTarget!==t.$el[0]&&t.settings.hide(n,t.$tipsy.stop(!0,!0))});return}t.settings.hide(n,t.$tipsy.stop(!0,!0))}},readify:function(){this.ready=!0;this.$tipsy=n('<div id="tooltipsy'+this.random+'" style="position:fixed;z-index:2147483647;display:none">').appendTo("body");this.$tip=n('<div class="'+this.settings.className+'">').appendTo(this.$tipsy);this.$tip.data("rootel",this.$el);var t=this.$el,i=this.$tip;this.$tip.html(this.settings.content!=""?typeof this.settings.content=="string"?this.settings.content:this.settings.content(t,i):this.title)},offset:function(){return this.$el[0].getBoundingClientRect()},destroy:function(){this.$tipsy&&(this.$tipsy.remove(),n.removeData(this.$el,"tooltipsy"))},defaults:{alignTo:"element",offset:[0,-1],content:"",show:function(n,t){t.fadeIn(100)},hide:function(n,t){t.fadeOut(100)},css:{},className:"tooltipsy",delay:200,showEvent:"mouseenter",hideEvent:"mouseleave"}};n.fn.tooltipsy=function(t){return this.each(function(){new n.tooltipsy(this,t)})}})(jQuery);