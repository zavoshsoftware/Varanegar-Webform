/**
 * Collapsible, jQuery Plugin
 * 
 * Collapsible management.  Optional cookie support using the jQuery Cookie plugin:
 * https://github.com/carhartl/jquery-cookie
 * 
 * Copyright (c) 2010 John Snyder (snyderplace.com)
 * @license http://www.snyderplace.com/collapsible/license.txt New BSD
 * @version 1.2.1
 */
(function(n){function l(i,f){var o=n.extend({},n.fn.collapsible.defaults,f),s=[];return i.each(function(){var i=n(this),u,f,l;a(i,o);o.bind=="mouseenter"&&i.bind("mouseenter",function(n){n.preventDefault();r(i,o)});o.bind=="mouseover"&&i.bind("mouseover",function(n){n.preventDefault();r(i,o)});o.bind=="click"&&i.bind("click",function(n){n.preventDefault();r(i,o)});o.bind=="dblclick"&&i.bind("dblclick",function(n){n.preventDefault();r(i,o)});u=i.attr("id");t(o)?e(o)?(l=h(u,o),l===!1?(i.addClass(o.cssClose),o.loadClose(i,o)):(i.addClass(o.cssOpen),o.loadOpen(i,o),s.push(u))):(f=c(u,o),f===!1?(i.addClass(o.cssClose),o.loadClose(i,o)):(i.addClass(o.cssOpen),o.loadOpen(i,o),s.push(u))):(f=c(u,o),f===!1?(i.addClass(o.cssClose),o.loadClose(i,o)):(i.addClass(o.cssOpen),o.loadOpen(i,o),s.push(u)))}),s.length>0&&t(o)?u(s.toString(),o):u("",o),i}function i(n){return n.data("collapsible-opts")}function a(n,t){return n.data("collapsible-opts",t)}function f(n,t){return n.hasClass(t.cssClose)}function o(n,i){if(n.addClass(i.cssClose).removeClass(i.cssOpen),i.animateClose(n,i),t(i)){var r=n.attr("id");w(r,i)}}function s(n,i){if(n.removeClass(i.cssClose).addClass(i.cssOpen),i.animateOpen(n,i),t(i)){var r=n.attr("id");p(r,i)}}function r(n,t){return f(n,t)?s(n,t):o(n,t),!1}function v(t,i){n.each(t,function(t,r){f(n(r),i)&&s(n(r),i)})}function y(t,i){n.each(t,function(t,r){f(n(r),i)||o(n(r),i)})}function t(t){return!n.cookie||t.cookieName==""?!1:!0}function p(i,r){if(!t(r))return!1;if(!e(r))return u(i,r),!0;if(h(i,r))return!0;var o=decodeURIComponent(n.cookie(r.cookieName)),f=o.split(",");return f.push(i),u(f.toString(),r),!0}function w(i,r){var f,s,o;return t(r)?e(r)?(f=h(i,r),f===!1)?!0:(s=decodeURIComponent(n.cookie(r.cookieName)),o=s.split(","),o.splice(f,1),u(o.toString(),r),!0):!0:!1}function u(i,r){return t(r)?(n.cookie(r.cookieName,i,r.cookieOptions),!0):!1}function h(i,r){if(!t(r)||!e(r))return!1;var f=decodeURIComponent(n.cookie(r.cookieName)),o=f.split(","),u=n.inArray(i,o);return u==-1?!1:u}function e(i){return t(i)?n.cookie(i.cookieName)===null?!1:!0:!1}function c(t,i){var u=b(i),r=n.inArray(t,u);return r==-1?!1:r}function b(n){var t=[];return n.defaultOpen!=""&&(t=n.defaultOpen.split(",")),t}n.fn.collapsible=function(t,i){return!this||this.length<1?this:typeof t=="string"?n.fn.collapsible.dispatcher[t](this,i):n.fn.collapsible.dispatcher._create(this,t)};n.fn.collapsible.dispatcher={_create:function(n,t){l(n,t)},toggle:function(n){return r(n,i(n)),n},open:function(n){return s(n,i(n)),n},close:function(n){return o(n,i(n)),n},collapsed:function(n){return f(n,i(n))},openAll:function(n){return v(n,i(n))},closeAll:function(n){return y(n,i(n))}};n.fn.collapsible.defaults={cssClose:"collapse-close",cssOpen:"collapse-open",cookieName:"collapsible",cookieOptions:{path:"/",expires:7,domain:"",secure:""},defaultOpen:"",speed:"slow",bind:"click",animateOpen:function(n,t){n.next().stop(!0,!0).slideDown(t.speed)},animateClose:function(n,t){n.next().stop(!0,!0).slideUp(t.speed)},loadOpen:function(n){n.next().show()},loadClose:function(n){n.next().hide()}}})(jQuery);